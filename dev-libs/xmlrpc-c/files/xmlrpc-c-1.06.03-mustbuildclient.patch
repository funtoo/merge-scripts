Index: xmlrpc-c-1.06.03/src/cpp/Makefile
===================================================================
--- xmlrpc-c-1.06.03.orig/src/cpp/Makefile
+++ xmlrpc-c-1.06.03/src/cpp/Makefile
@@ -17,12 +17,15 @@ default: all
 # libxmlrpc_cpp is the legacy C++ wrapper library.  The others are the
 # more elaborate replacements.
 
-TARGET_LIBRARY_NAMES := \
+TARGET_LIBRARY_NAMES = \
   libxmlrpc_cpp \
   libxmlrpc++ \
   libxmlrpc_server++ \
-  libxmlrpc_server_abyss++ \
-  libxmlrpc_client++ \
+  libxmlrpc_server_abyss++
+
+ifeq ($(MUST_BUILD_CLIENT),yes)
+  TARGET_LIBRARY_NAMES += libxmlrpc_client++
+endif
 
 STATIC_LIBRARIES_TO_INSTALL = $(TARGET_STATIC_LIBRARIES)
 
@@ -57,7 +60,9 @@ LIBXMLRPCPP_OBJS = \
 
 LIBXMLRPC_SERVERPP_OBJS = registry.o
 LIBXMLRPC_SERVER_ABYSSPP_OBJS = server_abyss.o
+ifeq ($(MUST_BUILD_CLIENT),yes)
 LIBXMLRPC_CLIENTPP_OBJS = client.o client_simple.o curl.o libwww.o wininet.o
+endif
 
 ALL_OBJS = \
   XmlRpcCpp.o \
Index: xmlrpc-c-1.06.03/GNUmakefile
===================================================================
--- xmlrpc-c-1.06.03.orig/GNUmakefile
+++ xmlrpc-c-1.06.03/GNUmakefile
@@ -36,6 +36,7 @@ OMIT_VERSION_H = Y
 OMIT_TRANSPORT_CONFIG_H = Y
 
 transport_config.h: $(BUILDDIR)/Makefile.config
+ifeq ($(MUST_BUILD_CLIENT),yes)
 	rm -f $@
 	echo '/* This file was generated by a make rule */' >>$@
 ifeq ($(MUST_BUILD_WININET_CLIENT),yes)
@@ -67,6 +68,7 @@ else
     endif
   endif
 endif
+endif
 
 .PHONY: clean clean-local
 clean: $(SUBDIRS:%=%/clean) clean-common clean-local
Index: xmlrpc-c-1.06.03/src/Makefile
===================================================================
--- xmlrpc-c-1.06.03.orig/src/Makefile
+++ xmlrpc-c-1.06.03/src/Makefile
@@ -68,8 +68,10 @@ endif
 # referred-to library before it loads libxxx.  Note that the link command
 # may require the necessary -L options in addition.
 
+ifeq ($(MUST_BUILD_CLIENT),yes)
 LIBXMLRPC_CLIENT_OBJS = xmlrpc_client.lo xmlrpc_client_global.lo
 LIBXMLRPC_CLIENT_LIBDEP = -lxmlrpc_util -lxmlrpc
+endif
 
 LIBXMLRPC_SERVER_OBJS = registry.lo system_method.lo
 LIBXMLRPC_SERVER_LIBDEP = -lxmlrpc_util -lxmlrpc
@@ -78,8 +80,10 @@ LIBXMLRPC_SERVER_ABYSS_OBJS = xmlrpc_ser
 LIBXMLRPC_SERVER_ABYSS_LIBDEP = \
   -lxmlrpc_util -lxmlrpc_server -L$(ABYSS_LIBDIR) -lxmlrpc_abyss -lxmlrpc
 
+ifeq ($(ENABLE_CGI_SERVER),yes)
 LIBXMLRPC_SERVER_CGI_OBJS = xmlrpc_server_cgi.lo
 LIBXMLRPC_SERVER_CGI_LIBDEP = -lxmlrpc_util -lxmlrpc_server -lxmlrpc
+endif
 
 LIBXMLRPC_OBJS = \
 	trace.lo \
Index: xmlrpc-c-1.06.03/tools/Makefile
===================================================================
--- xmlrpc-c-1.06.03.orig/tools/Makefile
+++ xmlrpc-c-1.06.03/tools/Makefile
@@ -10,11 +10,12 @@ SUBDIRS = binmode-rpc-kit turbocharger
 
 ifeq ($(MUST_BUILD_CLIENT),yes)
   SUBDIRS += xmlrpc xmlrpc_transport
-endif
 
 ifeq ($(ENABLE_CPLUSPLUS),yes)
   SUBDIRS += xml-rpc-api2cpp
 endif
+endif
+
 
 .PHONY: all clean distclean install check dep
 
Index: xmlrpc-c-1.06.03/xmlrpc-c-config.in
===================================================================
--- xmlrpc-c-1.06.03.orig/xmlrpc-c-config.in
+++ xmlrpc-c-1.06.03/xmlrpc-c-config.in
@@ -108,26 +108,31 @@ while test $# -gt 0; do
       ;;
     client|libwww-client)
       # libwww-client is for backward compatibility
-      the_libs="-lxmlrpc_client $the_libs"
 
-      if test "${MUST_BUILD_WININET_CLIENT}" = "yes"; then
-        the_libs="@WININET_LDADD@ $the_libs"
-        the_rpath="@WININET_RPATH@ $the_rpath"
-        the_wl_rpath="@WININET_WL_RPATH@ $the_wl_rpath"
-      fi
-      if test "${MUST_BUILD_CURL_CLIENT}" = "yes"; then
-        the_libs="@CURL_LDADD@ $the_libs"
-        the_rpath="@CURL_RPATH@ $the_rpath"
-        the_wl_rpath="@CURL_WL_RPATH@ $the_wl_rpath"
-      fi
-      if test "${MUST_BUILD_LIBWWW_CLIENT}" = "yes"; then
-        the_libs="@LIBWWW_LDADD@ $the_libs"
-        the_rpath="@LIBWWW_RPATH@ $the_rpath"
-        the_wl_rpath="@LIBWWW_WL_RPATH@ $the_wl_rpath"
-      fi
-      if test "${needCpp}" = "yes"; then
-        the_libs="-lxmlrpc_client++ $the_libs"
+      if test "${MUST_BUILD_WININET_CLIENT}" = "yes" || \
+         test "${MUST_BUILD_CURL_CLIENT}" = "yes" || \
+         test "${MUST_BUILD_LIBWWW_CLIENT}" = "yes"; then
+        the_libs="-lxmlrpc_client $the_libs"
+
+        if test "${MUST_BUILD_WININET_CLIENT}" = "yes"; then
+          the_libs="@WININET_LDADD@ $the_libs"
+          the_rpath="@WININET_RPATH@ $the_rpath"
+          the_wl_rpath="@WININET_WL_RPATH@ $the_wl_rpath"
         fi
+        if test "${MUST_BUILD_CURL_CLIENT}" = "yes"; then
+          the_libs="@CURL_LDADD@ $the_libs"
+          the_rpath="@CURL_RPATH@ $the_rpath"
+          the_wl_rpath="@CURL_WL_RPATH@ $the_wl_rpath"
+        fi
+        if test "${MUST_BUILD_LIBWWW_CLIENT}" = "yes"; then
+          the_libs="@LIBWWW_LDADD@ $the_libs"
+          the_rpath="@LIBWWW_RPATH@ $the_rpath"
+          the_wl_rpath="@LIBWWW_WL_RPATH@ $the_wl_rpath"
+        fi
+        if test "${needCpp}" = "yes"; then
+          the_libs="-lxmlrpc_client++ $the_libs"
+        fi
+      fi
       ;;
     --version)
       echo "@VERSION@"
